---

---

<section class="relative pt-20 pb-20 lg:pt-32 lg:pb-28">
    <div
        class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center"
    >
        <h1
            class="text-4xl sm:text-5xl lg:text-7xl font-bold tracking-tight text-slate-900 mb-6 font-['Outfit']"
        >
            Calculadoras fáciles de <br class="hidden sm:block" />
            <span class="text-indigo-600">sueldo e impuestos</span> en Uruguay
        </h1>

        <p
            class="mx-auto max-w-2xl text-lg sm:text-xl text-slate-600 mb-10 leading-relaxed"
        >
            Calculá tu sueldo líquido, aguinaldo, salario vacacional y más. <br
                class="hidden sm:block"
            />
            Resultados rápidos, explicados en simple y optimizados para Uruguay.
        </p>

        <div class="flex flex-wrap justify-center gap-3 sm:gap-4 mb-12">
            <div
                class="flex items-center gap-2.5 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-lg border border-slate-200/60 text-sm sm:text-base font-medium text-slate-700"
            >
                <span class="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> Sueldo
                líquido
            </div>
            <div
                class="flex items-center gap-2.5 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-lg border border-slate-200/60 text-sm sm:text-base font-medium text-slate-700"
            >
                <span class="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> Aguinaldo
                y vacacional
            </div>
            <div
                class="flex items-center gap-2.5 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-lg border border-slate-200/60 text-sm sm:text-base font-medium text-slate-700"
            >
                <span class="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> Horas
                extra
            </div>
            <div
                class="flex items-center gap-2.5 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-lg border border-slate-200/60 text-sm sm:text-base font-medium text-slate-700"
            >
                <span class="w-1.5 h-1.5 rounded-full bg-indigo-500"></span> IVA y
                más
            </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <a
                href="#calculadoras"
                class="inline-flex items-center justify-center px-8 py-4 text-base font-bold text-white transition-all duration-200 bg-indigo-600 border border-transparent rounded-xl hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600 shadow-lg shadow-indigo-200 hover:shadow-indigo-300 transform hover:-translate-y-0.5 scroll-smooth"
            >
                Ver calculadoras
            </a>
            <div class="relative w-full sm:w-auto group" id="search-container">
                <div
                    class="absolute -inset-0.5 bg-gradient-to-r from-pink-600 to-indigo-600 rounded-xl blur opacity-30 group-hover:opacity-60 transition duration-200"
                >
                </div>
                <div class="relative">
                    <input
                        type="text"
                        id="calculator-search"
                        placeholder="Buscar calculadora..."
                        class="relative w-full sm:w-80 inline-flex items-center justify-center px-8 py-4 pl-12 text-base font-medium text-slate-700 transition-all duration-200 bg-white border border-transparent rounded-xl hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600"
                    />
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                        ></path>
                    </svg>
                </div>

                <!-- Typeahead Results Dropdown -->
                <div
                    id="search-results"
                    class="hidden absolute top-full mt-2 w-full sm:w-80 bg-white rounded-xl shadow-xl border border-slate-200 overflow-hidden z-50"
                >
                    <div id="results-list" class="max-h-80 overflow-y-auto">
                        <!-- Results will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div
        class="absolute top-0 inset-x-0 h-64 bg-gradient-to-b from-indigo-50 to-transparent -z-10"
    >
    </div>
</section>

<script>
    import { searchCalculators } from "../lib/data/calculators";

    const searchInput = document.getElementById(
        "calculator-search",
    ) as HTMLInputElement;
    const searchResults = document.getElementById("search-results");
    const resultsList = document.getElementById("results-list");

    function renderResults(query: string) {
        if (!resultsList || !searchResults) return;

        const results = searchCalculators(query);

        if (query.trim().length === 0) {
            searchResults.classList.add("hidden");
            return;
        }

        if (results.length === 0) {
            resultsList.innerHTML = `
                <div class="px-4 py-3 text-sm text-slate-500 text-center">
                    No se encontraron calculadoras
                </div>
            `;
            searchResults.classList.remove("hidden");
            return;
        }

        resultsList.innerHTML = results
            .map(
                (calc) => `
            <a
                href="${calc.url}"
                class="block px-4 py-3 hover:bg-indigo-50 transition-colors border-b border-slate-100 last:border-b-0"
            >
                <div class="font-semibold text-slate-900">${calc.name}</div>
                <div class="text-sm text-slate-600 mt-0.5">${calc.description}</div>
            </a>
        `,
            )
            .join("");

        searchResults.classList.remove("hidden");
    }

    // Handle input events
    searchInput?.addEventListener("input", (e) => {
        const query = (e.target as HTMLInputElement).value;
        renderResults(query);
    });

    // Close dropdown when clicking outside
    document.addEventListener("click", (e) => {
        const target = e.target as HTMLElement;
        const searchContainer = document.getElementById("search-container");

        if (searchContainer && !searchContainer.contains(target)) {
            searchResults?.classList.add("hidden");
        }
    });

    // Show results again when focusing on input with existing text
    searchInput?.addEventListener("focus", () => {
        if (searchInput.value.trim().length > 0) {
            renderResults(searchInput.value);
        }
    });
</script>
